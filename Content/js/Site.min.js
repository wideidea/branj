function showmessage(e, t, o) { $("#lblMessageHeader").text(e), $("#lblMessageBody").text(t), $("#lblMessageFooter").text(o), $("#MessageModal").modal() } function getCiteis() { $("#cityId").find("option").remove().end(), $.ajax({ url: "/Manage/GetCities", type: "POST", dataType: "json", contentType: "application/json; charset=utf-8", data: JSON.stringify({ stateId: stateId }), success: function (e) { $.each(e, function (e, t) { $("#cityId").append('<option value="' + t.Value + '">' + t.Text + "</option>") }) } }) } function AddAddressSuccess(e) { e.Success ? alert(e.Message) : showmessage("", e.Message, "") } function PreviewImage() { var e = new FileReader; e.readAsDataURL(document.getElementById("fileUpload").files[0]), e.onload = function (e) { document.getElementById("imgnewgallery").src = e.target.result }, $("#fileUploadTitle").text(document.getElementById("fileUpload").files[0]) } function Previewlogo() { var e = new FileReader; e.readAsDataURL(document.getElementById("logoUpload").files[0]), e.onload = function (e) { document.getElementById("imglogo").src = e.target.result } } function invertColor(e) { var t = e; return t = t.substring(1), t = parseInt(t, 16), t = "#" + (t = ("000000" + (t = (t ^= 16777215).toString(16))).slice(-6)) } function invertRGB_ColorStr(e) { "transparent" === e && (e = "rgb(255, 255, 255)"); var t = e.match(/\((\d+),\s?(\d+),\s?(\d+)\)/); return "rgb(" + $.map(t, function (e, t) { return t ? Math.abs(255 - parseInt(e)) : null }).join(",") + ")" } $("form.AjaxForm").ajaxForm({ beforeSend: function () { }, success: function (e) { }, complete: function (e) { } }), $("form.RegisterAjaxForm").ajaxForm({ beforeSend: function () { }, success: function (e) { e.Success ? ($("#RegisterModal").modal("hide"), $("#LoginModal").modal(), showmessage("ثبت نام انجام شد",e.Message , "به برَنج خوش آمدید")) : $("#lblRegisterFooter").text(e.Message) } }), $("form.LoginAjaxForm").ajaxForm({ beforeSend: function () { $(".loadingtoggle").toggle() }, success: function (e) { if (e.Success) { var t = '<form action="/Account/LogOff" id="logoutForm" method="post"></form><a class="btn btn-sm btn-outline-light my-2 ml-sm-2" href="/Manage" title="Manage">پروفایل ' + e.Message + ' !</a><a class="btn btn-sm" href="javascript:document.getElementById(\'logoutForm\').submit()">خروج</a>'; $("#divLoginPartial").html(t), $("#LoginModal").modal("hide") } else $("#lblLoginFooter").text(e.Message) }, complete: function (e) { $(".loadingtoggle").toggle() } }), $("form.LoginFactor").ajaxForm({ beforeSend: function () { $(".loadingtoggle").toggle() }, success: function (e) { e.Success ? location.reload() : $("#lblLoginFooter").text(e.Message) }, complete: function (e) { $(".loadingtoggle").toggle() } }), $("form.AjaxForm").ajaxForm({ success: function (e) { $("#ShoppingBag").text(e.Count), showmessage("افزودن به سبد خرید!", e.Message, ""), $("#lblMessageFooter").append('  <a class="ShoppingCartMessage m-auto" href="/Products/ShoppingCart"> نهایی کردن خرید </a>') } }), $("#StateId").change(function () { stateId = $("#StateId").val(), getCiteis() }), $(".treeul li:has(ul)").addClass("parent_li"), $(".treeul li.parent_li > .collaps").on("click", function (e) { var t = $(this).parent("li.parent_li").find(" > ul > li"); t.is(":visible") ? (t.hide("fast"), $(this).attr("title", "گسترش این شاخه").addClass("fa-plus").removeClass("fa-minus")) : (t.show("fast"), $(this).attr("title", "بستن این شاخه").addClass("fa-minus").removeClass("fa-plus")), e.stopPropagation() }), $(document).on("click", ".parentformsubmit", function () { $(this).parents("form").submit() }), $(".control_indicator").each(function () { var e = invertRGB_ColorStr($(this).css("background-color")); $(this).find(".glyphicon").css("color", e) }), $(document).on("click", ".facor-details", function () { $(this).closest("tr").next().toggle("slow") });